<!DOCTYPE html>
<html lang="en">
<head>
    <style>
        .section-title {
  position: relative;
  font-size: var(--h2-font-size);
  color: var(--first-color);
  margin-top: var(--mb-2);
  margin-bottom: var(--mb-4);
  text-align: center;
}

.section-title::after {
  position: absolute;
  content: '';
  width: 64px;
  height: 0.18rem;
  left: 0;
  right: 0;
  margin: auto;
  top: 2rem;
  background-color: var(--first-color);
}

.section {
  padding-top: 3rem;
  padding-bottom: 2rem;
}
    </style>
<title>JavaScript - read JSON from URL</title>
<link rel='stylesheet' type='text/css' media='screen' href='main.css'>
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
</head>

<body>

    <section class="work section" id="projects">
        <h2 class="section__title">Projects</h2>

        

        <div class="work__container bd-grid" id="gridview">
            <!-- <div class="card">
                <div class="face face1">
                    <div class="content">
                        <div class="icon">
                            <img src="assets/img/health tracking.png" aria-hidden="true"></i>
                        </div>
                    </div>
                </div>
                <div class="face face2">
                    <div class="content">
                        <h3>
                            <a href="https://github.com/rahulpr22/Runtime-Monitoring-in-Healthcare-Systems" target="_blank" style="color: tomato;">Remote Health Monitoring System</a>
                        </h3>
                        <p> Date</p>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="face face1">
                    <div class="content">
                        <div class="icon">
                            <img src="assets/img/health tracking.png" aria-hidden="true"></i>
                        </div>
                    </div>
                </div>
                <div class="face face2">
                    <div class="content">
                        <h3>
                            <a href="https://github.com/rahulpr22/Runtime-Monitoring-in-Healthcare-Systems" target="_blank" style="color: tomato;">Remote Health Monitoring System</a>
                        </h3>
                        <p> Date</p>
                    </div>
                </div>
            </div> -->
        </div>
        

    </section>
    <script>
        var getJSON = function(url, callback) {

            var xhr = new XMLHttpRequest();
            xhr.open('GET', url, true);
            xhr.responseType = 'application/json';

            xhr.onload = function() {

                var status = xhr.status;

                if (status == 200) {
                    callback(null, xhr.response);
                } else {
                    callback(status);
                }
            };

            xhr.send();
        };

        function datefy(date){
            var parts =date.split('T')[0].split('-');
            // Please pay attention to the month (parts[1]); JavaScript counts months from 0:
            // January - 0, February - 1, etc.
            var mydate = new Date(parts[0], parts[1] - 1, parts[2]); 
            return mydate.toDateString()
        }
        function populate(data){
            const container = document.getElementById('gridview');

            data.forEach((result, idx) => {
            // Create card element
            const card = document.createElement('div');
            card.classList = 'card-body';

            // Construct card content
            const content = `
            <div class="card">
                <div class="face face1">
                    <div class="content">
                        <div class="icon">
                            <img style="margin-left:50px" src="blog.png" aria-hidden="true"></i>
                        </div>
                    </div>
                </div>
                <div class="face face2">
                    <div class="content">
                        <h3>
                            <a href="#" target="_blank" style="color:black" >${result.title}</a>
                        </h3>
                        <p> ${datefy(result.date)}</p>
                    </div>
                </div>
            </div>
            `;

            // Append newyly created card element to the container
            container.innerHTML += content;
            })
        }

        getJSON('https://raw.githubusercontent.com/rahulpr22/demo.github.io/master/posts.json',  function(err, data) {

            if (err != null) {
            console.error(err);
        } else {

            var text = data
            var arr=JSON.parse(text);
            console.log(text);

            var f= arr.files
            //data1 = ['user1', 'user2', 'user3'];
            //update_list(data1)
            populate(f)
            
           // $(".mypanel").append(tree(f));
            
        }
        });

    </script>

</body>
</html>